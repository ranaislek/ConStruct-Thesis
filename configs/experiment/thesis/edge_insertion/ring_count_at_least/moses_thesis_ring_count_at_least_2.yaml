# @package _global_

general:
  name: 'moses_thesis_ring_count_at_least_2'  # Override name for this specific experiment

# Training config is inherited from thesis_train (includes early stopping)
# No need to override here since thesis_train has all the right settings

model:
  diffusion_steps: 500    # Stable trade-off between speed and quality; increase if resources allow
  n_layers: 4             # Increased layers for better molecular representation
  hidden_mlp_dims:
    X: 128
    E: 128
    y: 128
  hidden_dims:
    dx: 128
    de: 128
    dy: 128
    n_head: 4
    dim_ffX: 256
    dim_ffE: 256
    dim_ffy: 256

  # Edge-insertion constraint settings aligned to MOSES dataset statistics:
  min_rings: 2            # At least 2 rings required
  min_ring_length: 4      # At least 4-ring length required
  rev_proj: ring_count_at_least  # Edge-insertion projector for "at least" constraints
  transition: edge_insertion       # Edge-insertion transition (flipped edge-deletion)
  
  # ConStruct philosophy: Post-generation validation

dataset:
  name: moses
  remove_h: false  # MOSES typically includes hydrogen atoms
  datadir: 'data/moses'
  batch_size: 128         # Consistent with training batch size
  num_workers: 4          # Improved data loading performance
  adaptive_loader: false
  fraction: 1.0           # Use entire dataset for robust model training 