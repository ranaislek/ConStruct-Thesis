# @package _global_
general:
  name: 'moses_debug_ring_length_at_most_5'
  wandb: 'online'
  resume: null
  test_only: null
  check_val_every_n_epochs: 2
  sample_every_val: 1
  samples_to_generate: 10
  samples_to_save: 5
  chains_to_save: 2
  final_model_samples_to_generate: 100
  final_model_samples_to_save: 50
  final_model_chains_to_save: 5
  number_chain_steps: 50
train:
  n_epochs: 5
  batch_size: 16
  save_model: true
  seed: 42
model:
  diffusion_steps: 50
  n_layers: 4                  # STANDARDIZED: Same as ring_count_at_most
  hidden_mlp_dims:
    X: 128                      # STANDARDIZED: Same as ring_count_at_most
    E: 64                      # STANDARDIZED: Same as ring_count_at_most
    y: 64                      # STANDARDIZED: Same as ring_count_at_most
  hidden_dims:
    dx: 128                     # STANDARDIZED: Same as ring_count_at_most
    de: 64                     # STANDARDIZED: Same as ring_count_at_most
    dy: 64                     # STANDARDIZED: Same as ring_count_at_most
    n_head: 4                  # STANDARDIZED: Same as ring_count_at_most
    dim_ffX: 256               # STANDARDIZED: Same as ring_count_at_most
    dim_ffE: 128                # STANDARDIZED: Same as ring_count_at_most
    dim_ffy: 128                # STANDARDIZED: Same as ring_count_at_most
  # Edge-deletion constraint settings:
  max_ring_length: 5              # Maximum 5-ring length
  rev_proj: ring_length_at_most    # Edge-deletion projector for "at most" constraints
  transition: absorbing_edges      # Edge-deletion transition
  
  # ConStruct philosophy: Post-generation validation
  post_gen_validation: True  # Enable post-generation chemical validation
  post_gen_validation_config:
    enable_rdkit: True
    enable_valency_check: True
    enable_connectivity_check: True
dataset:
  name: moses
  remove_h: false  # MOSES typically includes hydrogen atoms
  datadir: data/moses
  batch_size: 16
  num_workers: 0
  adaptive_loader: false
  fraction: 1.0
  subset: 1000   # Use subset for faster debugging